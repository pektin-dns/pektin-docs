---
sidebar_position: 30
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# Methods

**All** methods are using POST requests to keep the HTTP shenanigans to a minimum. <br/>
This is to cause less confusion and errors.<br/>
Everything is transmitted through the body in JSON. No paths, queries or custom headers.<br/>
The content type **must** be set to "application/json".<br/>

_The Key/Keys word refers to the name/keyword of an entry in Redis in this context._

## /get

Performs a lookup for a value in Redis using the exact key.<br/>
The keys must be provided in an array.

<Tabs groupId="code-type">

<TabItem value="json" label="JSON" default>

```json
{
    "token": "gss_token:D55JJ4B05VEfjRmYxMxX...",
    "queries": ["example.com.:SOA", "example.com.:AAAA"]
}
```

</TabItem>

<TabItem value="js" label="JS">

```js
// in a ES module with top level await

const res = await fetch(endpoint + "/get", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
        token,
        queries: ["example.com.:SOA", "example.com.:AAAA"]
    })
}).catch(e => {
    console.log(e);
});
console.log(res);
```

</TabItem>
</Tabs>

## /set

Performs a validity check on the provided record and then sets it in Redis.

<Tabs groupId="code-type">

<TabItem value="json" label="JSON" default>

```json
{
    "token": "gss_token:D55JJ4B05VEfjRmYxMxX...",
    "records": [
        {
            "name": "example.com.:SOA",
            "rr_set": [
                {
                    "ttl": 3600,
                    "value": {
                        "SOA": {
                            "mname": "ns1.example.com.",
                            "rname": "hostmaster.example.com.",
                            "refresh": 0,
                            "retry": 0,
                            "serial": 0,
                            "expire": 0,
                            "minimum": 0
                        }
                    }
                }
            ]
        },
        {
            "name": "example.com.:AAAA",
            "rr_set": [
                {
                    "ttl": 3600,
                    "value": {
                        "AAAA": "1::1"
                    }
                }
            ]
        }
    ]
}
```

</TabItem>

<TabItem value="js" label="JS">

```js
// in a ES module with top level await

const res = await fetch(endpoint + "/set", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
        token,
        records: [
            {
                name: "example.com.:SOA",
                rr_set: [
                    {
                        ttl: 3600,
                        value: {
                            SOA: {
                                mname: "ns1.example.com.",
                                rname: "hostmaster.example.com.",
                                refresh: 0,
                                retry: 0,
                                serial: 0,
                                expire: 0,
                                minimum: 0
                            }
                        }
                    }
                ]
            },
            {
                name: "example.com.:AAAA",
                rr_set: [
                    {
                        ttl: 3600,
                        value: {
                            AAAA: "1::1"
                        }
                    }
                ]
            }
        ]
    })
}).catch(e => {
    console.log(e);
});
console.log(res);
```

</TabItem>
</Tabs>

## /delete

Deletes key and value for an exact key.<br/>
The keys must be provided in an array.

<Tabs groupId="code-type">

<TabItem value="json" label="JSON" default>

```json
{
    "token": "gss_token:D55JJ4B05VEfjRmYxMxX...",
    "keys": ["example.com.:SOA", "example.com.:AAAA"]
}
```

</TabItem>

<TabItem value="js" label="JS">

```js
// in a ES module with top level await

const res = await fetch(endpoint + "/delete", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
        token: "gss_token:D55JJ4B05VEfjRmYxMxX...",
        keys: ["example.com.:SOA", "example.com.:AAAA"]
    })
}).catch(e => {
    console.log(e);
});
console.log(res);
```

</TabItem>
</Tabs>

## /search

Performs a Redis search using the KEYS command. <br/>
This does **NOT** support regex instead using a [glob pattern search](<https://en.wikipedia.org/wiki/Glob_(programming)>).

<Tabs groupId="code-type">

<TabItem value="json" label="JSON" default>

```json
{
    "token": "gss_token:D55JJ4B05VEfjRmYxMxX...",
    "glob": "*.:SOA"
}
```

</TabItem>

<TabItem value="js" label="JS">

```js
// in a ES module with top level await

const res = await fetch(endpoint + "/search", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
        token: "gss_token:D55JJ4B05VEfjRmYxMxX...",
        glob: "*.:SOA"
    })
}).catch(e => {
    console.log(e);
});
console.log(res);
```

</TabItem>
</Tabs>

## /rotate
